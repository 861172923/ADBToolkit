# ADB & Scrcpy 工具集

[English](README_EN.md) | 中文

这是一个功能强大的安卓设备管理工具集，通过简单的菜单将常用的 ADB (Android Debug Bridge) 命令与高性能的 Scrcpy 投屏工具无缝集成。无论您是开发者、测试人员还是高级用户，这个脚本都能极大地提高您的工作效率。

---

## 核心功能

*   **设备管理**: 轻松查看、重启、进入特殊模式（Recovery/Bootloader）。
*   **应用管理**: 快速安装、卸载、启动和停止应用程序。
*   **无线连接**: 无需数据线即可连接和管理您的设备。
*   **屏幕操作**: 一键截图和录屏，并自动保存到电脑。
*   **高级投屏 (Scrcpy)**: 集成了强大的 Scrcpy，提供低延迟、高质量的投屏和控制，并为AR眼镜等特殊设备提供了高级适配功能。
*   **日志工具**: 查看和清除设备日志，方便调试。

---

## 使用前准备

1.  **安装 ADB**:
    *   确保您已安装 Android SDK Platform Tools，并且 `adb.exe` 所在的路径已添加到系统的 `PATH` 环境变量中。

2.  **安装 Scrcpy**:
    *   确保您已下载 Scrcpy (本项目已包含 `scrcpy-win64-v3.3.1` 文件夹)。
    *   将 `scrcpy.exe` 所在的路径 (例如 `E:\Tool\Adb Tool\scrcpy-win64-v3.3.1`) 添加到系统的 `PATH` 环境变量中，以便脚本能找到它。

3.  **在安卓设备上启用USB调试**:
    *   进入 `设置` > `关于手机`。
    *   连续点击"版本号"7次，直到提示"您已处于开发者模式"。
    *   返回上一级菜单，进入 `系统和更新` > `开发者选项`。
    *   打开"USB调试"开关。

---

## 如何使用

1.  通过USB数据线将您的安卓设备连接到电脑。
2.  双击运行 `adb_tool.bat` 文件。
3.  根据屏幕上显示的菜单，输入对应的数字并按回车，即可执行相应的功能。

---

## 视频教程

📺 **详细使用教程**: [B站视频教程](https://www.bilibili.com/video/BV1YivKz1Eaj/?share_source=copy_web&vd_source=80d27e156558a950280846f6a49e5e75)

观看视频教程可以更直观地了解工具的使用方法和各项功能。

---

## 功能详解

### 主菜单

*   **1. 查看设备**: 列出所有已连接的设备及其状态。
*   **2. 安装APK**: 提示您输入APK文件的完整路径，并将其安装到设备上。
*   **3. 无线连接**: 进入无线连接子菜单，可以启用TCP模式或通过IP地址连接设备。**首次使用时请按照引导进行操作即可成功连接**。
*   **4. Scrcpy 高级投屏**: 进入强大的Scrcpy功能菜单 (详见下文)。
*   **5. 截屏**: 截取设备当前屏幕，并自动保存到 `screenshot` 文件夹中。
    *   自动创建 `screenshot` 文件夹（如果不存在）
    *   支持自定义文件名，自动添加 `.png` 扩展名
    *   文件保存路径：`screenshot\文件名.png`
*   **6. 录屏**: 使用Scrcpy录制设备屏幕，自动保存到 `scrcpy_record` 文件夹中。
    *   自动创建 `scrcpy_record` 文件夹（如果不存在）
    *   支持自定义文件名，自动添加 `.mp4` 扩展名
    *   文件保存路径：`scrcpy_record\文件名.mp4`
    *   使用Scrcpy引擎，提供高质量录屏
*   **7. 卸载应用**: 提示您输入应用的包名 (例如 `com.example.app`) 并将其卸载。
*   **8. 重启设备**: 重启您的安卓设备。
*   **9. 重启到Recovery**: 将设备重启到Recovery模式。
*   **10. 重启到Bootloader**: 将设备重启到Bootloader模式。
*   **11. 查看日志**: 提供三种模式查看设备日志 (全部/实时/仅错误)。
*   **12. 清除日志**: 清除设备中缓存的日志。
*   **13. 获取序列号**: 显示设备的唯一序列号。
*   **14. 查看设备状态**: 显示设备连接状态和型号信息。
*   **15. 启动应用**: 根据包名和可选的Activity名启动一个应用。
*   **16. 停止应用**: 强制停止一个正在运行的应用。
*   **17. 获取IP地址**: 显示设备的WLAN IP地址，方便无线连接。
*   **18. 断开连接**: 进入断开连接子菜单，可以选择断开所有设备或指定设备。

## 使用方法

1. 确保已安装Android SDK并配置好ADB环境
2. 双击运行 `adb_tool.bat` 文件
3. 根据菜单提示选择相应的功能
4. 按照提示输入必要的信息

## 文件说明

- `adb_tool.bat` - 主程序文件（中文界面，已修复编码问题）
- `README.md` - 详细使用说明

### Scrcpy 高级投屏 (主菜单选项 4)

*   **1. 启动默认镜像**: 以默认设置启动Scrcpy，可以完全控制设备。
*   **2. 启动只读模式**: 仅显示屏幕，电脑的鼠标和键盘无法控制设备。
*   **3. 录制屏幕**: 不显示投屏窗口，直接将屏幕操作录制为 `scrcpy_record.mkv` 文件。
*   **4. 列出可用显示器**: 显示设备上所有可用的显示器及其ID (用于外接显示器或AR眼镜)。
*   **5. Low Quality (Fluent)**: 以较低的画质和分辨率启动，在无线连接不稳定时可以获得更流畅的体验。
*   **6. 指定显示器**: 核心高级功能，专为多屏幕或特殊设备设计。
    1.  首先，它会列出所有可用的显示器ID。
    2.  您输入要显示的ID后，会进入**裁剪模式选择**：
        *   **1 (自动平分)**: 您只需按下 `1`，脚本会自动获取该显示器的总分辨率，并自动计算一半的宽度进行裁剪。这是为AR眼镜等左右分屏设备设计的"一键"解决方案。
        *   **2 (手动输入)**: 您可以手动输入完整的裁剪参数 (`宽:高:X:Y`)。
        *   **0 (否)**: 不进行任何裁剪，显示该显示器的完整画面。

---

## 文件结构

*   `adb_tool.bat`: 工具集的主程序。
*   `scrcpy-win64-v3.3.1/`: 包含 Scrcpy 开源投屏工具。
    *   `AddToPath.bat`: 环境变量自动配置脚本 (需要管理员权限运行)。
*   `README.md`: 本说明文件。

### 自动创建的文件夹

*   `screenshot/`: 截屏文件存储文件夹（自动创建）
    *   存放所有截屏图片文件
    *   格式：PNG图片文件
    *   示例：`screenshot\my_screenshot.png`
*   `scrcpy_record/`: 录屏文件存储文件夹（自动创建）
    *   存放所有录屏视频文件
    *   格式：MP4视频文件
    *   示例：`scrcpy_record\my_recording.mp4`

---

## 使用前准备

1.  **安装 ADB**:
    *   确保您已安装 Android SDK Platform Tools，并且 `adb.exe` 所在的路径已添加到系统的 `PATH` 环境变量中。

2.  **安装 Scrcpy**:
    *   确保您已下载 Scrcpy (本项目已包含 `scrcpy-win64-v3.3.1` 文件夹)。
    *   **自动配置环境变量**: 以管理员身份运行 `scrcpy-win64-v3.3.1\AddToPath.bat` 脚本，它会自动将 Scrcpy 添加到系统的 `PATH` 环境变量中。
    *   **手动配置**: 如果自动配置失败，请手动将 `scrcpy.exe` 所在的路径 (例如 `E:\Tool\Adb Tool\scrcpy-win64-v3.3.1`) 添加到系统的 `PATH` 环境变量中。

3.  **在安卓设备上启用USB调试**:
    *   进入 `设置` > `关于手机`。
    *   连续点击"版本号"7次，直到提示"您已处于开发者模式"。
    *   返回上一级菜单，进入 `系统和更新` > `开发者选项`。
    *   打开"USB调试"开关。

---

## 如何使用

1.  通过USB数据线将您的安卓设备连接到电脑。
2.  双击运行 `adb_tool.bat` 文件。
3.  根据屏幕上显示的菜单，输入对应的数字并按回车，即可执行相应的功能。

---

## 注意事项

1. **权限要求**：某些操作需要设备root权限
2. **网络连接**：无线连接功能需要设备和电脑在同一网络
3. **文件路径**：安装APK时请使用完整路径
4. **包名格式**：应用包名通常为 `com.example.appname` 格式
5. **Scrcpy环境**：确保scrcpy.exe已添加到系统PATH环境变量中
6. **文件管理**：
    *   截屏和录屏功能会自动创建对应的文件夹
    *   截屏文件保存在 `screenshot` 文件夹中
    *   录屏文件保存在 `scrcpy_record` 文件夹中
    *   支持自定义文件名，程序会自动添加正确的文件扩展名

---

## 常见问题

### Q: 设备无法连接？
A: 检查USB调试是否启用，驱动是否正确安装

### Q: 无线连接失败？
A: 确保设备和电脑在同一WiFi网络，且设备IP地址正确

### Q: Scrcpy功能无法使用？
A: 检查scrcpy是否已正确安装并添加到PATH环境变量中

### Q: AR眼镜投屏显示异常？
A: 使用"指定显示器"功能中的"自动平分"模式，专为AR设备优化

### Q: 截屏文件保存在哪里？
A: 截屏文件自动保存在 `screenshot` 文件夹中，程序会自动创建该文件夹

### Q: 录屏文件保存在哪里？
A: 录屏文件自动保存在 `scrcpy_record` 文件夹中，程序会自动创建该文件夹

### Q: 如何自定义截屏/录屏文件名？
A: 在功能执行时会提示输入文件名，程序会自动添加正确的文件扩展名（.png/.mp4）

### Q: 文件夹不存在会影响功能使用吗？
A: 不会，程序会自动检查并创建所需的文件夹

---

## 系统要求

- Windows 7/8/10/11
- Android SDK Platform Tools
- 支持ADB的Android设备
- Scrcpy 3.3.1+ (已包含)

---

## 致谢

*   **原始脚本作者**: B站：Cool灬浩 (https://space.bilibili.com/228962838)
*   **Scrcpy 开源项目**: Genymobile (https://github.com/Genymobile/scrcpy)